## 差分约束系统

解不等式组

对于 a - b <= x，转换成：a <= b + x

可以联想

```cpp
if (d[u] + cost[u][v] < d[v]) {
  d[v] = d[u] + cost[u][v];
}
```

和上面的不等式是一样的，对于所有b到a的边必须满足这个不等式，就是最短路

这就类似最短路了，用bellman-floyd

对于 x[i] - x[j] <= a[k]，建 j -> i 的有向边 1 到 n 的最短路就是 x[n] - x[0] 的最大值

x[n] - x[0] <= ans --> x[n] <= x[0] + ans 最短路

## 一般化建图

如果最后求两个值之差的最大值，a - b <= ans，把所有方程转化成 <= 的形式，结果求最短路

如果最后求两个值之差的最小值，a - b >= ans，把所有方程转化成 >= 的形式，结果求最长路

如果有a - b = k 的式子，先转换成两个式子：a - b <= k，a - b >= k，然后用上面的方法建图

如果有a - b < k的式子，转换成 a - b <= k - 1

如果 s 无法到达 t，说明有无穷多解

如果存在负环，说明无解



